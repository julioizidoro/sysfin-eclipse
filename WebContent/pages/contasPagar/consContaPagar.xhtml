<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<ui:composition template="/pages/templates/default.xhtml">
	<ui:define name="corpo">
	<h:form id="frmConsultaPagar">
		<br/>  
			<p:commandLink   action="#{contasPagarMB.novaConta()}" style="margin-left:84.8%;text-decoration:none;" title="Novo Lançamento">
				<img src="../../resources/img/iconeplusS.ico" style="border:solid; border-width: 1px; border-color: #3D9446; border-top-left-radius:5px; border-bottom-left-radius:5px;"/>
				<p:ajax event="dialogReturn" listener="#{contasPagarMB.retornoDialogNovo}" update="idTabelaContaPagar"/>
            </p:commandLink>  
            <p:commandLink id="idImagemFiltro"  action="#{contasPagarMB.coresFiltrar()}" update="idImagemFiltro" style="margin-left:-0.4%;margin-top:-10%; text-decoration:none;" title="Filtros">
				<img  src="#{contasPagarMB.imagemFiltro}" style="border:solid; border-width: 1px; border-color: #3D9446;"/>
           		<p:ajax event="dialogReturn" listener="#{contasPagarMB.retornoDialogFiltrar}" update="idTabelaContaPagar"/>
            </p:commandLink>
            <p:commandLink id="idImagemLiberar"  action="#{contasPagarMB.novaLiberacao()}" update="idImagemFiltro" style="margin-left:-0.4%;margin-top:-10%; text-decoration:none;" title="Liberar">
				<img  src="../../resources/img/iconeLibera.png" style="border:solid; border-width: 1px; border-color: #3D9446;"/>
				<p:ajax event="dialogReturn" listener="#{contasPagarMB.retornoDialogLiberar}" update="idTabelaContaPagar"/>
           	</p:commandLink>
            <p:commandLink   action="#" style="margin-left:-0.4%;margin-top:-10%; text-decoration:none;" title="Importa para excel" ajax="false">
				<img src="../../resources/img/iconeexportS.png" style="border:solid; border-width: 1px; border-color: #3D9446;"/>
				<p:dataExporter type="xls" target="idTabelaContaPagar" fileName="contasPagar" />
            </p:commandLink>
            <p:commandLink   action="#{contasPagarMB.novaImpressao()}" style="margin-left:-0.4%;margin-top:-10%; text-decoration:none;" title="Imprimir">
				<img src="../../resources/img/iconeImprimirS.png" style="border:solid; border-width: 1px; border-color: #3D9446; border-top-right-radius:5px; border-bottom-right-radius:5px;"/>
            </p:commandLink>   
            <br /><br />
                    <p:contextMenu for="idTabelaContaPagar" style="background:white;">
                        <p:menuitem value="Excluir"   icon=" ui-icon-trash"  action="#{contasPagarMB.excluir()}" update="idTabelaContaPagar"/>
                        <p:menuitem value="Autorizar"  icon=" ui-icon-check"  action="#{contasPagarMB.autorizarPagamento(contasPagarMB.contasPagar)}" actionListener="#{contasPagarMB.gerarListaContas()}" update="idTabelaContaPagar"/>
                        <p:menuitem value="Editar"  icon=" ui-icon-pencil"  action="#{contasPagarMB.editar(contasPagarMB.contasPagar)}"/> 
                    </p:contextMenu> 
                    <p:dataTable id="idTabelaContaPagar"  var="contasPagar"  value="#{contasPagarMB.listaContasPagar}" style="border:none;" class="tabelacontas" 
                                 scrollRows="10"  scrollable="true" scrollHeight="300" selection="#{contasPagarMB.contasPagar}" selectionMode="single" rowKey="#{contasPagar.idcontasPagar}">
                        
                        <p:column headerText="Status"  style="width:30px; background:#E7EBEB; color:black; border:none;" styleClass="alinharCenter">
                            <p:commandLink>
                                <img src="#{contasPagarMB.verStatus(contasPagar)}" />
                            </p:commandLink>
                        </p:column>  
                        <p:column headerText="Vencimento" sortBy="#{contasPagar.dataVencimento}" style="width:17%; background:#E7EBEB; color:black; border:none;">
                            <h:outputText  value="#{contasPagar.dataVencimento}" style="margin-left:33%;" > 
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </h:outputText> 
                        </p:column> 
                        <p:column headerText="Unidade" sortBy="#{contasPagar.cliente.nomeFantasia}" style="width:15%; background:#E7EBEB; color:black; border:#fff;">
                            <h:outputText value="#{contasPagar.cliente.nomeFantasia}" style="margin-left:25%;"/>
                        </p:column> 
                        <p:column headerText="Descrição" sortBy="#{contasPagar.descricao}" style="widht:55%; background:#E7EBEB; color:black; border:none;" >
                            <h:outputText value="#{contasPagar.descricao}"/>
                        </p:column>
                        <p:column headerText="Fornecedor" sortBy="#{contasPagar.fornecedor}" style="width:15%; background:#E7EBEB; color:black; border:none;" >
                            <h:outputText value="#{contasPagar.fornecedor}" style="margin-left:25%;"/>
                        </p:column>  
                        <p:column id="imagemAutorizadas"  headerText="Autorizadas" sortBy="#{contasPagar.autorizarPagamento}"   style="width:10%; background:#E7EBEB; color:black; border:none;" styleClass="alinharCenter" >
                            <img  src="#{contasPagarMB.imagemAutorizadas(contasPagar)}" style="margin-right:50%;"/>
                        </p:column>
                        <p:column headerText="Valor Conta" style="width:5%; background:#E7EBEB; color:black; border:none;" styleClass="alinharCenter">
                            <h:outputText value="#{contasPagar.valor}" >
                                <f:convertNumber currencySymbol="" type="currency"/>
                            </h:outputText>                                    
                        </p:column>
                        <p:column style="width:28px; background:#E7EBEB; color:black; border:none;">
                            <p:selectBooleanCheckbox value="#{contasPagar.selecionado}"/>
                        </p:column>
                    </p:dataTable>
                    <br />
                    <h:panelGrid  style="width:18%; margin-left: 35%; background-color:white; border-radius:5px; border-left:solid; border-left-color:red;">
	                	<br />
			            <tt style="margin-left:10%; font:bold; font-size:14px; color:black; font-family: 'Pacifico',cursive;">Total Contas Vencidas</tt>
			            <br />
			              <h:outputText id="contasVenc" size="20" maxlength="100" class="totallancamentos" value="R$ #{contasPagarMB.totalVencidas}"  readonly="true"/>
	        		</h:panelGrid>
	        		<h:panelGrid  style="width:20%;  margin-left:55%; margin-top: -7%; background-color:white; border-radius:5px; border-left:solid; border-left-color:green;">
	        			<br />
			            <tt style="margin-left: 10%; font-size: 14px; color: black; font-family: 'Pacifico',cursive;">Total Contas a Vencer</tt>
			            <br/>
			            <h:outputText id="contasVencer" size="20" maxlength="100" class="totallancamentos" value="R$ #{contasPagarMB.totalVencer}"  readonly="true"/>
	        		</h:panelGrid>
	        		<h:panelGrid style="width:20%;  margin-left:77%; margin-top: -7%; background-color:white; border-radius:5px; border-left:solid; border-left-color:blue;">
	        			<br />
			            <tt style="margin-left: 10%; font-size: 14px; color: black; font-family: 'Pacifico',cursive;">Total Contas a Pagar</tt>
			            <br/>
			            <h:outputText id="contasPagar" size="20" maxlength="100" class="totallancamentos" value="R$ #{contasPagarMB.total}"  readonly="true"/>
			             
	        		</h:panelGrid>
	        		<br />
   </h:form>
	</ui:define>
</ui:composition>   
</html>